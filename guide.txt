NOTE: this works for docker-desktop only

Important : Make sure you enable kubernetes and your port 80 is open 

kubectl apply -f https://raw.githubusercontent.com/kubernetes/ingress-nginx/controller-v0.44.0/deploy/static/provider/cloud/deploy.yaml
kubectl create namespace smartpay
kubectl label nodes docker-desktop node.s3dv.io/currency=<currency low case>
//if you want to test other currency, you need to override the label node.s3dv.io/currency
//kubectl label nodes docker-desktop node.s3dv.io/currency=<currency low case> --overwrite
kubectl config set-context --current --namespace=smartpay

//clone smartpay-scraper-controller repo then cd to it and run
npm run docker-build
//clone smartpay-server repo then cd to it and run
npm run docker-build
//clone smartpay-client repo then cd to it and run
npm run docker-build

kubectl apply -k <path to folder where kustomization.yaml is located> or you can use . if you are already on the folder
	
docker run -d -p 5000:5000 --restart=always --name registry registry:2

//clone smartpay-scraper-v2 repo then cd to it and run
//you can also use your IDE to run this gradle task
//gradlew.bat :module-name:dockerBuildAndPush
gradlew.bat :smartpay-scraper-vnd-vacbi:dockerBuildAndPush


Connect to our OpenVPN server to have access on our dev DB Service api.

//sender nodejs app
//clone this repo https://github.com/materia2021/smartpay-sender.git
//install yarn first if you don't have 
npm -g install yarn
//go to sender folder
//modify transaction details inside index.js and run the ff commands
yarn
node index.js

optional: 

dashoard installation 

kubectl create -f https://raw.githubusercontent.com/kubernetes/dashboard/master/aio/deploy/recommended/kubernetes-dashboard.yaml
kubectl create serviceaccount dashboard-admin-sa
kubectl create clusterrolebinding dashboard-admin-sa --clusterrole=cluster-admin --serviceaccount=default:dashboard-admin-sa
kubectl get secrets
//copy the secret name should be something like dashboard-admin-sa-token-*
kubectl describe secret <secret name>
//copy the token
kubectl proxy
http://localhost:8001/api/v1/namespaces/kube-system/services/https:kubernetes-dashboard:/proxy/
//login using token

argocd installation

kubectl create namespace argocd
kubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml
kubectl port-forward svc/argocd-server -n argocd 8080:443
http://localhost:8080
//the initial password for user admin is set to the name of the server pod should be something like argocd-server-*
kubectl --namespace argocd get pods


ref https://kubernetes.io/docs/reference/kubectl/cheatsheet/
